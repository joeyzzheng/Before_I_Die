<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
</head>
<body>

<div><h2>jQuery AJAX API Test With Form with /api/register</h2></div>

<form>
    <div>
        <label>username: </label>
        <input type="text" name="username" placeholder="Tester">
    </div>
    
    <div>
        <label>email: </label>
        <input type="text" name="email" placeholder="Tester@gmail.com">
    </div>
    
    <div>
        <label>firstname: </label>
        <input type="text" name="firstname" placeholder="Tester">
    </div>   
    
    <div>
        <label>lastname: </label>
        <input type="text" name="lastname" placeholder="Dummy">
    </div>     
    
    <div>
        <label>hash password: </label>
        <input type="text" name="p" placeholder="########################">
    </div>   
    
    <div>
        <label>title: </label>
        <input type="text" name="title" placeholder="Web Programming Engineer">
    </div>  
    
    <div>
        <label>description: </label>
        <input type="text" name="description" placeholder="Front End and Back End">
    </div>  
    
    <div>
        <label>city: </label>
        <input type="text" name="city" placeholder="Santa Clara">
    </div> 
    
    <div>
        <label>state: </label>
        <input type="text" name="state" placeholder="CA">
    </div> 
    
    <div>
        <label>fileToUpload: </label>
        <input type="file" name="fileToUpload" placeholder="photo.jpg">
    </div> 
    <br>
    <button type="submit">Get JSON Return</button>
    
</form>
<br>
<div id="api-result"></div>

<script>
$(document).ready(function() {
    $("label").after("<br>");
    /* Load form information */
    $('form').submit(function(event) {
        var apiData = {
            'username'          : $('input[name=username]').val(),
            'email'             : $('input[name=email]').val(),
            'firstname'         : $('input[name=firstname]').val(),
            'lastname'          : $('input[name=lastname]').val(),
            'p'                 : $('input[name=p]').val(),
            'title'             : $('input[name=title]').val(),
            'description'       : $('input[name=description]').val(),
            'city'              : $('input[name=city]').val(),
            'state'             : $('input[name=state]').val(),
            'fileToUpload'      : $('input[name=fileToUpload]').val()
        };

        // Execute ajax with API /api/register
        $.ajax({
            type        : 'POST', // Define the https method that we want to use
            url         : 'https://apiapache-beforeidie.rhcloud.com/api/register', // api url that we want to call
            data        : apiData, // our data object
            dataType    : 'json', // what type of data do we expect back from the server
            encode      : true
        })
        
        /* if returned header shows 200 OK */
        .done(function(data) {
            //Debug message
            console.log("Success Message:\n" + JSON.stringify(data)); 
            $("#api-result").text("Success Message:\n" + JSON.stringify(data));
        })
        
        /* if returned header shows none 200 OK */
        .fail(function(data) {
            console.log("Failure Message:\n" + JSON.stringify(data)); 
            $("#api-result").text("Failure Message:\n" + JSON.stringify(data));
        })

        /* stop the form from submitting the normal way and refreshing the page */
        event.preventDefault();
    });
});

</script>
</body>
</html>




